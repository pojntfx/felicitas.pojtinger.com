{{ define "header" }}
  <header class="pf-c-page__header">
  <div class="pf-c-page__header-tools">
    <div class="pf-c-page__header-tools-group">
      <div class="pf-c-page__header-tools-item">
        <a
          aria-label="Help"
          href="{{ .Site.Data.person.cv }}"
          target="_blank"
          rel="noopener"
          class="pf-c-button pf-m-plain"
        >
          <span class="pf-c-button__icon pf-m-start">
            <i class="fas fa-book" aria-hidden="true"></i> </span
          >CV</a
        >
      </div>
    </div>
    <div class="pf-c-page__header-tools-group">
      <div class="pf-c-page__header-tools-item pf-u-p-md pf-u-pl-0">
        {{ partial "streamstatus" (dict "ID" "youtubestatus" "Platform"
        "youtube" "Username" .Site.Data.person.youtube "BaseURL" .Site.BaseURL )
        }}
      </div>

      <div class="pf-c-page__header-tools-item pf-u-p-md pf-u-pr-0">
        {{ partial "streamstatus" (dict "ID" "twitchstatus" "Platform" "twitch"
        "Username" .Site.Data.person.twitch "BaseURL" .Site.BaseURL ) }}
      </div>
    </div>
  </div>
</header>

{{ end }}

{{ define "main" }}
  <main class="pf-c-page__main pf-c-page__main--blur" tabindex="-1" id="main">
    <div class="pf-l-grid pf-m-gutter pf-u-p-xl pf-u-pb-md pf-x-person__header">
      <div class="pf-l-grid__item pf-m-5-col pf-u-display-flex pf-u-flex-direction-column pf-u-align-items-center pf-u-justify-content-center">
        <h1 class="pf-u-font-size-xl pf-u-font-weight-bold pf-u-mb-xs">{{ .Site.Data.person.name }}</h1>
        <p>{{ .Site.Data.person.description }}</p>
      </div>

      <figure class="pf-l-grid__item pf-m-2-col pf-u-display-flex pf-u-flex-direction-column pf-u-align-items-center pf-u-justify-content-center">
        <figcaption class="pf-x-c-avatar__figcaption">
          <div class="pf-c-chip">
            <span class="pf-c-chip__text">{{ .Site.Data.person.pronouns }}</span>
          </div> 
        </figcaption>

        <img
          src="{{ .Site.Data.person.img }}"
          alt="Profile picture of {{ .Site.Data.person.name }}"
          class="pf-c-avatar pf-m-xl pf-c-avatar--main"
        />
      </figure>

      <div class="pf-l-grid__item pf-m-5-col pf-u-display-flex pf-u-align-items-center pf-u-justify-content-center">
          <a
            href="https://twitter.com/{{ .Site.Data.person.twitter }}"
            target="_blank"
            class="pf-c-button pf-m-primary pf-u-mr-md"
          >
          <span class="pf-c-button__icon pf-m-start">
            <i class="fas fa-plus-circle" aria-hidden="true"></i>
          </span>

          Follow on Twitter
        </a>

        {{ partial "contactmenu" (dict "ID" "contact" "Matrix" .Site.Data.person.matrix "Signal" .Site.Data.person.signal "Mail" .Site.Data.person.mail ) }}
      </div>
    </div> 

    <section id="commit">
      {{ partial "lastcommit" (dict "ID" "lastcommit" "Username" .Site.Data.person.github "BaseURL" .Site.BaseURL ) }}
    </section>

    <div class="pf-l-grid pf-m-gutter">
      <div class="pf-l-grid__item pf-m-7-col">
        <section id="articles">
          <h2>Articles</h2>

          <ul>
            {{ range .Pages }}
              {{ if eq .Title "Articles" }}
                {{ range first 5 .Pages }}
                  <li>
                    <a href="{{ .Permalink }}">
                      <img
                        src="{{ ((index .Resources 0).Resize `300x`).Permalink }}"
                        alt="{{ .Params.HeaderAlt }}"
                        style="width: 100%; height: 300px; object-fit: cover;"
                      />

                      <h3>{{ .Title }}</h3>
                      <p>{{ .Params.Excerpt }}</p>
                      <div>
                        Published at
                        {{ .Date | time.Format ":date_long" }}
                      </div>
                    </a>
                  </li>
                {{ end }}
              {{ end }}
            {{ end }}
          </ul>

          <a href="/articles">All articles</a>
        </section>
      </div>
      <div class="pf-l-grid__item pf-m-5-col">
        <section id="tweets">
          {{ partial "twitterfeed" (dict "ID" "twitterfeed" "Username" .Site.Data.person.twitter "BaseURL" .Site.BaseURL ) }}
        </section>
      </div>
    </div>

    <section id="projects">
      <h2>Projects</h2>

      <ul>
        {{ range .Site.Data.projects_gen }}
          <li>
            <h3>{{ .title }}</h3>
            <ul>
              {{ range sort .projects "stars" "desc" }}
                <li>
                  <dl>
                    <dt>Name</dt>
                    <dd>
                      <a href="{{ .url }}" target="_blank" rel="noopener"
                        >{{ .title }}</a
                      >
                    </dd>

                    <dt>Description</dt>
                    <dd>
                      {{ .description }}
                    </dd>

                    <dt>Language</dt>
                    <dd>
                      {{ .language }}
                    </dd>

                    <dt>License</dt>
                    <dd>
                      {{ .license }}
                    </dd>

                    <dt>Last update</dt>
                    <dd>
                      {{ .date | time.Format ":date_long" }}
                    </dd>

                    <dt>Topics</dt>
                    <dd>
                      <ul>
                        {{ range first 5 .topics }}
                          <li>{{ . }}</li>
                        {{ end }}
                      </ul>
                    </dd>

                    <dt>Stars</dt>
                    <dd>
                      {{ .stars }}
                    </dd>

                    <dt>Forks</dt>
                    <dd>
                      {{ .forks }}
                    </dd>

                    <dt>Issues</dt>
                    <dd>
                      {{ .issues }}
                    </dd>
                  </dl>
                </li>
              {{ end }}
            </ul>
          </li>
        {{ end }}
      </ul>
    </section>

    {{ partial "footer" . }}
  </main>
{{ end }}
